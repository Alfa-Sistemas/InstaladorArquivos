/*CRIAR CAMPO PARA OBSERVAÇÕES AO MOVIMENTAR ESTOQUE MANUAL PARA MERCADO DE PORTO ALEGRE*/

ALTER TABLE C000032 ADD OBSERVACAO VARCHAR(250);



/*ALTERA MOVIMENTO DE SAÍDA 10 PARA 21*/

UPDATE C000032 SET MOVIMENTO = 21, QTDE = QTDE * (-1) WHERE (MOVIMENTO = 10) AND (QTDE < 0);



UPDATE C000032 SET QTDE = QTDE * (-1) WHERE QTDE < 0;



/*AJUSTA COLUNA DE ESTOQUE DA GRADE PARA 0 ONDE FOR NULL*/
UPDATE c000021 set ESTOQUE = 0 where (ESTOQUE IS NULL);



/*APAGA TRIGGERs, AGORA CONTROLE FICARÁ EM CLASSE INTERNA NA APLICAÇÃO*/

DROP TRIGGER C000032_DEL;

DROP TRIGGER C000032_UPD;

DROP TRIGGER C000032_BEF;

DROP TRIGGER C000032_BEF_INS;
DROP TRIGGER C000032_INS;


/*TIRA A COLUNA DE CODIGO E ADICIONA UMA NOVA COLUNA CODIGO DO TIPO INT */

ALTER TABLE C000032 DROP CODIGO;

ALTER TABLE C000032 ADD CODIGO INTEGER;

ALTER TABLE C000032 ALTER CODIGO POSITION 1;


ALTER TABLE C000032 ADD MOVIMENTO_TEMP VARCHAR(100);



/*CRIA O AUTO INCREMENT*/

CREATE SEQUENCE GEN_C000032_ID;

ALTER SEQUENCE GEN_C000032_ID RESTART WITH 0;